<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>3D Atom Simulation</title>
  <link rel="stylesheet" href="atom.css">
</head>
<body>
  <div class="container">
    <h1>3D Atom Simulator</h1>
    <canvas id="atomCanvas"></canvas>
    <div class="controls">
      <label for="atom-select">Choose Atom:</label>
      <select id="atom-select">
        <option value="hydrogen">Hydrogen</option>
        <option value="uranium">Uranium</option>
        <option value="lead">Lead</option>
      </select>
      <button id="split-atom">Split Atom</button>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/110/three.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/110/controls/OrbitControls.js"></script>
  <script>
    // Canvas and Renderer
    const canvas = document.querySelector("#atomCanvas");
    const renderer = new THREE.WebGLRenderer({ canvas, antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);

    // Scene and Camera
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    camera.position.z = 50;

    // OrbitControls for camera movement
    const controls = new THREE.OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true; // Smooth camera movement
    controls.dampingFactor = 0.05;

    // Lights
    const ambientLight = new THREE.AmbientLight(0xffffff, 0.7);
    scene.add(ambientLight);

    const pointLight = new THREE.PointLight(0xffffff, 1);
    pointLight.position.set(20, 20, 20);
    scene.add(pointLight);

    // Nucleus
    const nucleusGeometry = new THREE.SphereGeometry(5, 32, 32);
    const nucleusMaterial = new THREE.MeshPhongMaterial({ color: 0xff0000 });
    const nucleus = new THREE.Mesh(nucleusGeometry, nucleusMaterial);
    scene.add(nucleus);

    // Electrons
    const electronGeometry = new THREE.SphereGeometry(1, 16, 16);
    const electronMaterial = new THREE.MeshPhongMaterial({ color: 0x0000ff });

    const electronOrbits = [];
    for (let i = 0; i < 3; i++) {
      const orbit = new THREE.Group();
      for (let j = 0; j < 8; j++) {
        const electron = new THREE.Mesh(electronGeometry, electronMaterial);
        const angle = (j / 8) * Math.PI * 2;
        electron.position.set(Math.cos(angle) * (10 + i * 5), 0, Math.sin(angle) * (10 + i * 5));
        orbit.add(electron);
      }
      scene.add(orbit);
      electronOrbits.push(orbit);
    }

    // Animation Loop
    function animate() {
      requestAnimationFrame(animate);
      nucleus.rotation.y += 0.01;
      electronOrbits.forEach((orbit, idx) => {
        orbit.rotation.y += 0.01 + idx * 0.005;
      });
      controls.update(); // Update OrbitControls
      renderer.render(scene, camera);
    }
    animate();

    // Update Atom Based on Selection
    const atomSelect = document.querySelector("#atom-select");
    atomSelect.addEventListener("change", (e) => {
      const value = e.target.value;
      const sizeMapping = { hydrogen: 5, uranium: 15, lead: 10 };

      // Update Nucleus Size
      const newSize = sizeMapping[value];
      nucleus.scale.set(newSize / 5, newSize / 5, newSize / 5);

      // Adjust Electrons (Optional: adjust number of orbits/electrons per atom)
      electronOrbits.forEach((orbit, idx) => {
        const radius = 10 + idx * (newSize / 3);
        orbit.children.forEach((electron, i) => {
          const angle = (i / orbit.children.length) * Math.PI * 2;
          electron.position.set(Math.cos(angle) * radius, 0, Math.sin(angle) * radius);
        });
      });
    });

    // Split Atom Logic
    const splitButton = document.querySelector("#split-atom");
    splitButton.addEventListener("click", () => {
      scene.remove(nucleus);
      electronOrbits.forEach((orbit) => scene.remove(orbit));
      alert("Atom split simulation!");
    });

  </script>
</body>
</html>
