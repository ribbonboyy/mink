<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>3D Atom Simulator</title>
  <link rel="stylesheet" href="atom.css">
</head>
<body>
  <div class="container">
    <h1>3D Atom Simulator</h1>
    <canvas id="atomCanvas"></canvas>
    <div class="controls">
      <label for="atom-select">Choose Atom:</label>
      <select id="atom-select">
        <!-- 30 elements -->
        <option value="1">Hydrogen (1)</option>
        <option value="2">Helium (2)</option>
        <option value="3">Lithium (3)</option>
        <option value="4">Beryllium (4)</option>
        <option value="5">Boron (5)</option>
        <option value="6">Carbon (6)</option>
        <option value="7">Nitrogen (7)</option>
        <option value="8">Oxygen (8)</option>
        <option value="9">Fluorine (9)</option>
        <option value="10">Neon (10)</option>
        <option value="11">Sodium (11)</option>
        <option value="12">Magnesium (12)</option>
        <option value="13">Aluminum (13)</option>
        <option value="14">Silicon (14)</option>
        <option value="15">Phosphorus (15)</option>
        <option value="16">Sulfur (16)</option>
        <option value="17">Chlorine (17)</option>
        <option value="18">Argon (18)</option>
        <option value="19">Potassium (19)</option>
        <option value="20">Calcium (20)</option>
        <option value="21">Scandium (21)</option>
        <option value="22">Titanium (22)</option>
        <option value="23">Vanadium (23)</option>
        <option value="24">Chromium (24)</option>
        <option value="25">Manganese (25)</option>
        <option value="26">Iron (26)</option>
        <option value="27">Cobalt (27)</option>
        <option value="28">Nickel (28)</option>
        <option value="29">Copper (29)</option>
        <option value="30">Zinc (30)</option>
      </select>
      <button id="split-atom">Split Atom</button>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/110/three.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/110/controls/OrbitControls.js"></script>
  <script>
    // Setup
    const canvas = document.querySelector("#atomCanvas");
    const renderer = new THREE.WebGLRenderer({ canvas, antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    camera.position.z = 100;

    const controls = new THREE.OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;
    controls.dampingFactor = 0.05;

    // Lighting
    const ambientLight = new THREE.AmbientLight(0xffffff, 0.7);
    scene.add(ambientLight);

    const pointLight = new THREE.PointLight(0xffffff, 1);
    pointLight.position.set(50, 50, 50);
    scene.add(pointLight);

    // Materials
    const nucleusMaterial = new THREE.MeshPhongMaterial({ color: 0xff5733 });
    const electronMaterial = new THREE.MeshPhongMaterial({ color: 0x1e90ff });

    let nucleus;
    const electronOrbits = [];

    // Function to Create Nucleus
    function createNucleus(size) {
      const geometry = new THREE.SphereGeometry(size, 32, 32);
      return new THREE.Mesh(geometry, nucleusMaterial);
    }

    // Function to Create Electron Orbits
    function createElectronOrbits(atomicNumber) {
      const orbits = [];
      let electrons = atomicNumber;
      const radii = [10, 20, 30, 40]; // Example radii for electron orbits
      for (let i = 0; electrons > 0; i++) {
        const orbitGroup = new THREE.Group();
        const numElectrons = Math.min(electrons, 2 + i * 4);
        for (let j = 0; j < numElectrons; j++) {
          const electron = new THREE.Mesh(new THREE.SphereGeometry(1, 16, 16), electronMaterial);
          const angle = (j / numElectrons) * Math.PI * 2;
          electron.position.set(Math.cos(angle) * radii[i], 0, Math.sin(angle) * radii[i]);
          orbitGroup.add(electron);
        }
        orbits.push(orbitGroup);
        scene.add(orbitGroup);
        electrons -= numElectrons;
      }
      return orbits;
    }

    // Reset Atom
    function resetAtom(atomicNumber) {
      if (nucleus) scene.remove(nucleus);
      electronOrbits.forEach((orbit) => scene.remove(orbit));
      electronOrbits.length = 0;

      const nucleusSize = Math.log(atomicNumber) * 2 + 3;
      nucleus = createNucleus(nucleusSize);
      scene.add(nucleus);

      const orbits = createElectronOrbits(atomicNumber);
      orbits.forEach((orbit) => electronOrbits.push(orbit));
    }

    // Initial Atom
    resetAtom(1);

    // Animation
    function animate() {
      requestAnimationFrame(animate);
      nucleus.rotation.y += 0.01;
      electronOrbits.forEach((orbit) => {
        orbit.rotation.y += 0.01;
      });
      controls.update();
      renderer.render(scene, camera);
    }
    animate();

    // Event Listeners
    document.querySelector("#atom-select").addEventListener("change", (e) => {
      const atomicNumber = parseInt(e.target.value);
      resetAtom(atomicNumber);
    });

    document.querySelector("#split-atom").addEventListener("click", () => {
      scene.remove(nucleus);
      electronOrbits.forEach((orbit) => scene.remove(orbit));
      alert("Atom split!");
    });
  </script>
</body>
</html>
