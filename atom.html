<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atom</title>
    <link rel="stylesheet" href="atom.css">
    <style>
        /* Additional styling for the hover info */
        .hover-info {
            position: absolute;
            background: rgba(255, 255, 255, 0.7);
            padding: 10px;
            border-radius: 5px;
            display: none;
        }
    </style>
</head>
<body>
<div class="container">
    <h1>3D Atom Simulator</h1>
    <canvas id="atomCanvas"></canvas>
    <div class="controls">
        <!-- Atom selection and fission controls -->
        <label for="atom-select">Choose Atom:</label>
        <select id="atom-select">
            <option value="1">Hydrogen (1)</option>
        <option value="2">Helium (2)</option>
        <option value="3">Lithium (3)</option>
        <option value="4">Beryllium (4)</option>
        <option value="5">Boron (5)</option>
        <option value="6">Carbon (6)</option>
        <option value="7">Nitrogen (7)</option>
        <option value="8">Oxygen (8)</option>
        <option value="9">Fluorine (9)</option>
        <option value="10">Neon (10)</option>
        <option value="11">Sodium (11)</option>
        <option value="12">Magnesium (12)</option>
        <option value="13">Aluminum (13)</option>
        <option value="14">Silicon (14)</option>
        <option value="15">Phosphorus (15)</option>
        <option value="16">Sulfur (16)</option>
        <option value="17">Chlorine (17)</option>
        <option value="18">Argon (18)</option>
        <option value="19">Potassium (19)</option>
        <option value="20">Calcium (20)</option>
        <option value="21">Scandium (21)</option>
        <option value="22">Titanium (22)</option>
        <option value="23">Vanadium (23)</option>
        <option value="24">Chromium (24)</option>
        <option value="25">Manganese (25)</option>
        <option value="26">Iron (26)</option>
        <option value="27">Cobalt (27)</option>
        <option value="28">Nickel (28)</option>
        <option value="29">Copper (29)</option>
        <option value="30">Zinc (30)</option>
        <option value="31">Gallium (31)</option>
        <option value="32">Germanium (32)</option>
        <option value="33">Arsenic (33)</option>
        <option value="34">Selenium (34)</option>
        <option value="35">Bromine (35)</option>
        <option value="36">Krypton (36)</option>
        <option value="37">Rubidium (37)</option>
        <option value="38">Strontium (38)</option>
        <option value="39">Yttrium (39)</option>
        <option value="40">Zirconium (40)</option>
        <option value="41">Niobium (41)</option>
        <option value="42">Molybdenum (42)</option>
        <option value="43">Technetium (43)</option>
        <option value="44">Ruthenium (44)</option>
        <option value="45">Rhodium (45)</option>
        <option value="46">Palladium (46)</option>
        <option value="47">Silver (47)</option>
        <option value="48">Cadmium (48)</option>
        <option value="49">Indium (49)</option>
        <option value="50">Tin (50)</option>
        <option value="51">Antimony (51)</option>
        <option value="52">Tellurium (52)</option>
        <option value="53">Iodine (53)</option>
        <option value="54">Xenon (54)</option>
        <option value="55">Cesium (55)</option>
        <option value="56">Barium (56)</option>
        <option value="57">Lanthanum (57)</option>
        <option value="58">Cerium (58)</option>
        <option value="59">Praseodymium (59)</option>
        <option value="60">Neodymium (60)</option>
        <option value="61">Promethium (61)</option>
        <option value="62">Samarium (62)</option>
        <option value="63">Europium (63)</option>
        <option value="64">Gadolinium (64)</option>
        <option value="65">Terbium (65)</option>
        <option value="66">Dysprosium (66)</option>
        <option value="67">Holmium (67)</option>
        <option value="68">Erbium (68)</option>
        <option value="69">Thulium (69)</option>
        <option value="70">Ytterbium (70)</option>
        <option value="71">Lutetium (71)</option>
        <option value="72">Hafnium (72)</option>
        <option value="73">Tantalum (73)</option>
        <option value="74">Tungsten (74)</option>
        <option value="75">Rhenium (75)</option>
        <option value="76">Osmium (76)</option>
        <option value="77">Iridium (77)</option>
        <option value="78">Platinum (78)</option>
        <option value="79">Gold (79)</option>
        <option value="80">Mercury (80)</option>
        <option value="81">Thallium (81)</option>
        <option value="82">Lead (82)</option>
        <option value="83">Bismuth (83)</option>
        <option value="84">Polonium (84)</option>
        <option value="85">Astatine (85)</option>
        <option value="86">Radon (86)</option>
        <option value="87">Francium (87)</option>
        <option value="88">Radium (88)</option>
        <option value="89">Actinium (89)</option>
        <option value="90">Thorium (90)</option>
        <option value="91">Protactinium (91)</option>
        <option value="92">Uranium (92)</option>
        <option value="93">Neptunium (93)</option>
        <option value="94">Plutonium (94)</option>
        <option value="95">Americium (95)</option>
        <option value="96">Curium (96)</option>
        <option value="97">Berkelium (97)</option>
        <option value="98">Californium (98)</option>
        <option value="99">Einsteinium (99)</option>
        <option value="100">Fermium (100)</option>
        </select>
        <button id="split-atom">Split Atom</button>
        <button id="fissle-atom" style="display: none;">Fissle Atom</button>
        <div id="fission-info">
            <p><strong>Energy Released:</strong> <span id="energy-counter">0</span> MeV</p>
            <p><strong>Radiation Level:</strong> <span id="radiation-level">0</span> Rad</p>
            <p><strong>Dangerous Radius:</strong> <span id="danger-radius">0</span> meters</p>
        </div>
    </div>
    <div id="hover-info" class="hover-info"></div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
<script>
    const canvas = document.querySelector("#atomCanvas");
    const renderer = new THREE.WebGLRenderer({ canvas, antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0x202020); // Neutral dark background
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    camera.position.z = 50;

    const controls = new THREE.OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;

    // Lighting
    const light = new THREE.PointLight(0xffffff, 1, 0);
    light.position.set(50, 50, 50);
    scene.add(light);
    const ambientLight = new THREE.AmbientLight(0x404040); // Soft ambient light
    scene.add(ambientLight);

    // Raycaster and mouse
    const raycaster = new THREE.Raycaster();
    const mouse = new THREE.Vector2();
    let highlightedObject = null;

    // Hover info element
    const hoverInfoElement = document.getElementById('hover-info');

    // Atom parts
    const nucleusMaterial = new THREE.MeshPhongMaterial({ color: 0xff5733 });
    const electronMaterial = new THREE.MeshPhongMaterial({ color: 0x1e90ff });
    let nucleus;
    const electronGroups = [];

    function createNucleus(size) {
        const geometry = new THREE.SphereGeometry(size, 32, 32);
        return new THREE.Mesh(geometry, nucleusMaterial);
    }

    function createElectronRings(atomicNumber) {
        const electronShells = [2, 8, 18, 32]; // Electron shell distribution
        let electronsRemaining = atomicNumber;
        const orbits = [];

        electronShells.forEach((maxElectrons, shellIndex) => {
            if (electronsRemaining <= 0) return;

            const numElectrons = Math.min(maxElectrons, electronsRemaining);
            const group = new THREE.Group();
            const radius = 10 + shellIndex * 10;

            for (let i = 0; i < numElectrons; i++) {
                const angle = (i / numElectrons) * Math.PI * 2;
                const electron = new THREE.Mesh(new THREE.SphereGeometry(1, 16, 16), electronMaterial);
                electron.position.set(Math.cos(angle) * radius, 0, Math.sin(angle) * radius);
                group.add(electron);
            }

            group.rotation.x = Math.random() * Math.PI;
            group.rotation.y = Math.random() * Math.PI;
            orbits.push(group);
            scene.add(group);
            electronsRemaining -= numElectrons;
        });

        return orbits;
    }

    function resetAtom(atomicNumber) {
        // Clear existing atom
        if (nucleus) scene.remove(nucleus);
        electronGroups.forEach(group => scene.remove(group));
        electronGroups.length = 0;

        // Create nucleus
        const nucleusSize = Math.log(atomicNumber + 1) * 3;
        nucleus = createNucleus(nucleusSize);
        scene.add(nucleus);

        // Create electrons
        const newElectronGroups = createElectronRings(atomicNumber);
        electronGroups.push(...newElectronGroups);
    }

    // Initial atom
    resetAtom(1);

    function animate() {
        requestAnimationFrame(animate);

        // Rotate the nucleus
        if (nucleus) nucleus.rotation.y += 0.01;

        // Rotate electron groups
        electronGroups.forEach(group => {
            group.rotation.y += 0.02;
        });

        controls.update();
        renderer.render(scene, camera);
    }
    animate();

    // Atom selection
    document.getElementById("atom-select").addEventListener("change", e => {
        const atomicNumber = Number(e.target.value);
        resetAtom(atomicNumber);
    });

    // Mouse move event for raycasting
    window.addEventListener('mousemove', onMouseMove, false);
    function onMouseMove(event) {
        // Normalize mouse coordinates
        mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
        mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;

        // Update raycaster
        raycaster.update(camera, renderer.domElement);
        raycaster.update(camera);

        // Find intersections
        const intersects = raycaster.intersectObjects([nucleus, ...electronGroups]);

        if (intersects.length > 0) {
            const object = intersects[0].object;
            if (highlightedObject !== object) {
                // Remove highlight from previous object
                if (highlightedObject) {
                    highlightedObject.material.emissive.set(0x000000);  // Reset emissive color
                }

                // Highlight the new object
                highlightedObject = object;
                highlightedObject.material.emissive.set(0xffffff); // White highlight

                // Display info based on the object type
                if (object === nucleus) {
                    hoverInfoElement.innerHTML = "This is the nucleus.";
                    hoverInfoElement.style.display = "block";
                } else {
                    hoverInfoElement.innerHTML = "This is an electron.";
                    hoverInfoElement.style.display = "block";
                }
            }
        } else {
            // No intersection, hide the hover info and reset highlight
            if (highlightedObject) {
                highlightedObject.material.emissive.set(0x000000);  // Reset emissive color
            }
            highlightedObject = null;
            hoverInfoElement.style.display = "none";
        }
    }

    // Handle window resizing
    window.addEventListener('resize', () => {
        renderer.setSize(window.innerWidth, window.innerHeight);
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
    });
</script>
</body>
</html>
